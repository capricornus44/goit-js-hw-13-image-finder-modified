{"version":3,"sources":["webpack:///./templates/galleryCard.hbs","webpack:///./js/apiService.js","webpack:///./js/references.js","webpack:///./js/theme.js","webpack:///./index.js","webpack:///./js/modal.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","ApiService","this","searchQuery","page","perPage","isLastPage","fetchArticles","url","BASE_URL","fetch","response","ok","Error","json","totalHits","incrementPage","resetPage","newQuery","searchForm","document","querySelector","search","gallery","scroll","themeSwitchToggle","dotsBox","querySelectorAll","Theme","changeTheme","element","prevTheme","nextTheme","classList","remove","add","localStorage","setItem","getItem","body","refs","forEach","dot","checked","addEventListener","event","currentTarget","apiService","preventDefault","form","query","elements","value","trim","length","alert","text","fetchGallery","target","nodeName","enlargedImage","dataset","source","basicLightbox","show","innerHTML","printGallery","hits","insertAdjacentHTML","galleryCardTpl","IntersectionObserver","observer","hit","isIntersecting","then","disconnect","rootMargin","threshold","observe"],"mappings":"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","file":"main.3126c6aaa520397d3a37.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery__item\\\">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":17},\"end\":{\"line\":4,\"column\":33}}}) : helper)))\n    + \" data-source=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":46},\"end\":{\"line\":4,\"column\":63}}}) : helper)))\n    + \" alt=\\\"Cool image\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats__item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":16},\"end\":{\"line\":9,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats__item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":16},\"end\":{\"line\":13,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats__item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":16},\"end\":{\"line\":17,\"column\":28}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats__item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":16},\"end\":{\"line\":21,\"column\":29}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? lookupProperty(depth0,\"hits\") : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","const API_KEY = '20669309-c97d1ec468a66ad87fd39e114';\r\nconst BASE_URL = 'https://pixabay.com/api';\r\n\r\nexport default class ApiService {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n    this.perPage = 12;\r\n    this.isLastPage = false;\r\n  }\r\n\r\n  async fetchArticles() {\r\n    const url = `${BASE_URL}/?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=${this.perPage}&key=${API_KEY}`;\r\n\r\n    const response = await fetch(url);\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Request was rejected');\r\n    }\r\n\r\n    const data = await response.json();\r\n    // console.log(`Page: ${this.page}`, data);\r\n\r\n    this.isLastPage = data.totalHits - this.perPage * this.page <= 0;\r\n    // console.log(this.isLastPage);\r\n    this.incrementPage();\r\n    return data;\r\n  }\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n","export default {\r\n  searchForm: document.querySelector('#search-form'),\r\n  search: document.querySelector('.search'),\r\n  gallery: document.querySelector('.gallery'),\r\n  scroll: document.querySelector('.page-load-status'),\r\n  themeSwitchToggle: document.querySelector('#theme-switch-toggle'),\r\n  dotsBox: document.querySelectorAll('.dots-box'),\r\n};\r\n","import refs from './references';\r\n\r\nconst Theme = {\r\n  LIGHT: 'light-theme',\r\n  DARK: 'dark-theme',\r\n};\r\n\r\ncheckTheme();\r\n\r\nrefs.themeSwitchToggle.addEventListener('change', onToggleClick);\r\n\r\nfunction onToggleClick(event) {\r\n  if (event.currentTarget.checked) {\r\n    changeTheme(document.body, Theme.LIGHT, Theme.DARK);\r\n    refs.dotsBox.forEach(dot => {\r\n      changeTheme(dot, Theme.LIGHT, Theme.DARK);\r\n    });\r\n    return;\r\n  }\r\n  changeTheme(document.body, Theme.DARK, Theme.LIGHT);\r\n\r\n  refs.dotsBox.forEach(dot => {\r\n    changeTheme(dot, Theme.DARK, Theme.LIGHT);\r\n  });\r\n}\r\n\r\nfunction changeTheme(element, prevTheme, nextTheme) {\r\n  element.classList.remove(prevTheme);\r\n  element.classList.add(nextTheme);\r\n  localStorage.setItem('theme', nextTheme);\r\n}\r\n\r\nfunction checkTheme() {\r\n  if (localStorage.getItem('theme') === Theme.DARK) {\r\n    changeTheme(document.body, Theme.LIGHT, Theme.DARK);\r\n    refs.dotsBox.forEach(dot => {\r\n      changeTheme(dot, Theme.LIGHT, Theme.DARK);\r\n    });\r\n    refs.themeSwitchToggle.checked = true;\r\n  }\r\n}\r\n","import './styles.css';\r\nimport ApiService from './js/apiService';\r\nimport galleryCardTpl from './templates/galleryCard.hbs';\r\nimport refs from './js/references';\r\n\r\n// Import of notification plugin\r\nimport { alert } from '@pnotify/core/dist/PNotify.js';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport '@pnotify/core/dist/BrightTheme.css';\r\n\r\n// Import of function to open modal\r\nimport onOpenModal from './js/modal';\r\n\r\nimport './js/theme';\r\n\r\n//========================= <GALLERY RENDERING> ============================\r\nconst apiService = new ApiService();\r\n\r\nrefs.searchForm.addEventListener('submit', onSearch);\r\nrefs.gallery.addEventListener('click', onOpenModal);\r\n\r\nfunction onSearch(event) {\r\n  event.preventDefault();\r\n  const form = event.currentTarget;\r\n  apiService.query = form.elements.query.value;\r\n\r\n  if (apiService.query === '' || apiService.query.trim().length === 0) {\r\n    alert({\r\n      text: 'Enter a more specific query!',\r\n    });\r\n    return;\r\n  }\r\n\r\n  apiService.resetPage();\r\n  fetchGallery();\r\n}\r\n\r\nconst fetchGallery = async () => {\r\n  const data = await apiService.fetchArticles();\r\n  clearGallery();\r\n  printGallery(data);\r\n};\r\n\r\nfunction clearGallery() {\r\n  refs.gallery.innerHTML = '';\r\n}\r\n\r\nfunction printGallery({ hits }) {\r\n  refs.gallery.insertAdjacentHTML('beforeend', galleryCardTpl({ hits }));\r\n}\r\n//========================= END <GALLERY RENDERING> ============================\r\n\r\n//========================= <INFINITE SCROLL> ==================================\r\nconst options = {\r\n  rootMargin: '150px',\r\n  threshold: 0.05,\r\n};\r\n\r\nconst onIntersect = (data, observer) => {\r\n  data.forEach(hit => {\r\n    if (!hit.isIntersecting || apiService.query === '') {\r\n      return;\r\n    }\r\n\r\n    apiService.fetchArticles().then(({ hits }) => {\r\n      printGallery({ hits });\r\n    });\r\n  });\r\n  if (apiService.isLastPage) {\r\n    observer.disconnect();\r\n  }\r\n};\r\n\r\nconst observer = new IntersectionObserver(onIntersect, options);\r\n\r\nobserver.observe(refs.scroll);\r\n//========================= END <INFINITE SCROLL> ==================================\r\n","// Import of modal plugin\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport 'basicLightbox/dist/basicLightbox.min.css';\r\n\r\nexport default function onOpenModal(event) {\r\n  event.preventDefault();\r\n  if (event.target.nodeName !== 'IMG') {\r\n    return;\r\n  }\r\n\r\n  const enlargedImage = `<img src= ${event.target.dataset.source}>`;\r\n  basicLightbox.create(enlargedImage).show();\r\n}\r\n"],"sourceRoot":""}